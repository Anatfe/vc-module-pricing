<div class="blade-content __medium-wide">
    <div class="blade-inner">
        <div class="inner-block" ng-init="setGridOptions({
                    rowHeight: 60,
                    rowTemplate: 'list.row.html',
                    editableCellTemplate: 'ui-grid/vc-cellTextEditor',
                    columnDefs: [
                        { name: 'currency', displayName: 'pricing.blades.prices-list.labels.currency', enableCellEdit: false },
                        { name: 'list', displayName: 'pricing.blades.prices-list.labels.list-price', enableCellEditOnFocus: true, type: 'number'},
                        { name: 'sale', displayName: 'pricing.blades.prices-list.labels.sale-price', enableCellEditOnFocus: true, editableCellTemplate: 'sale-cellTextEditor'},
                        { name: 'minQuantity', displayName: 'pricing.blades.prices-list.labels.min-quantity', enableCellEditOnFocus: true, editableCellTemplate: 'minQuantity-cellTextEditor'},
                        { name: 'modifiedDate', displayName: 'pricing.blades.prices-list.labels.last-modified', cellTemplate: 'am-time-ago.cell.html', enableCellEdit: false}
                    ]})">
            <form name="formScope">
                <div class="table-wrapper" ng-if="blade.currentEntities.length" ng-init="setForm(formScope);">
                    <div ui-grid="gridOptions" style="height:400px" ui-grid-cellNav ui-grid-edit ui-grid-auto-resize ui-grid-save-state ui-grid-selection ui-grid-resize-columns ui-grid-move-columns></div>
                    <!--<div ui-grid="gridOptions" ui-grid-cellNav ui-grid-edit ui-grid-auto-resize ui-grid-save-state ui-grid-selection ui-grid-resize-columns ui-grid-move-columns ui-grid-height></div>-->

                    <table class="table">
                        <thead>
                            <tr>
                                <th class="table-col __product-control">
                                    <label class="form-control __checkbox">
                                        <input type="checkbox" ng-model="blade.selectedAll" ng-change="toggleAll()" />
                                        <span class="check"></span>
                                    </label>
                                </th>
                                <th class="table-col">{{'pricing.blades.prices-list.labels.currency' | translate}}</th>
                                <th class="table-col">{{'pricing.blades.prices-list.labels.list-price' | translate}}</th>
                                <th class="table-col">{{'pricing.blades.prices-list.labels.sale-price' | translate}}</th>
                                <th class="table-col">{{'pricing.blades.prices-list.labels.min-quantity' | translate}}</th>
                                <th class="table-col __date">{{'pricing.blades.prices-list.labels.last-modified' | translate}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-item" ng-repeat="data in blade.currentEntities track by $index" ng-class="{'__selected': data === selectedItem}" context-menu data-target="pril_menu_{{$index}}" ng-click='selectItem(data)'>
                                <td class="table-col">
                                    <label class="form-control __checkbox">
                                        <input type="checkbox" ng-model="data._selected">
                                        <span class="check"></span>
                                    </label>
                                </td>
                                <td class="table-col">{{data.currency}}</td>
                                <td class="table-col">
                                    <div class="form-input __mini">
                                        <input money required ng-model="data.list" ng-class="{'ng-invalid': !isListPriceValid(data)}" />
                                    </div>
                                </td>
                                <td class="table-col">
                                    <div class="form-input __mini">
                                        <input money ng-model="data.sale" ng-class="{'ng-invalid': !isSalePriceValid(data)}" placeholder="{{'platform.placeholders.n-a' | translate}}">
                                    </div>
                                </td>
                                <td class="table-col">
                                    <div class="form-input __mini __number">
                                        <input smart-float num-type="integer" required ng-model="data.minQuantity" ng-class="{'ng-invalid': !isUniqueQty(data)}">
                                    </div>
                                </td>
                                <td class="table-col __date">
                                    <span class="table-date" am-time-ago="data.modifiedDate"></span>
                                    <ul class="menu __context" role="menu" id="pril_menu_{{$index}}">
                                        <li class="menu-item" ng-click='delete(data)'>
                                            <i class="menu-ico fa fa-trash-o"></i> {{'platform.commands.delete' | translate}}
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </form>
            <div class="note" ng-if="!blade.currentEntities.length">{{ 'platform.list.no-data' | translate }}</div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="ui-grid/vc-cellTextEditor">
    <div class="ui-grid-cell-contents">
        <div class="table-col">
            <div class="form-input __mini">
                <input money required ng-model="MODEL_COL_FIELD" ui-grid-editor ng-class="{'ng-invalid': !grid.appScope.isListPriceValid(row.entity)}" />
            </div>
        </div>
    </div>
</script>
<script type="text/ng-template" id="sale-cellTextEditor">
    <div class="table-col">
        <div class="form-input __mini">
            <input money ng-model="MODEL_COL_FIELD" ng-class="{'ng-invalid': !grid.appScope.isSalePriceValid(row.entity)}" placeholder="{{'platform.placeholders.n-a' | translate}}">
        </div>
    </div>
</script>

<script type="text/ng-template" id="minQuantity-cellTextEditor">
    <td class="table-col">
        <div class="form-input __mini __number">
            <input smart-float num-type="integer" required ng-model="MODEL_COL_FIELD" ng-class="{'ng-invalid': !grid.appScope.isUniqueQty(row.entity)}">
        </div>
    </td>
</script>

<script type="text/ng-template" id="list.row.html">
    <!--ng-click='grid.appScope.selectItem(row.entity)'-->
    <div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.uid" ui-grid-one-bind-id-grid="rowRenderIndex + '-' + col.uid + '-cell'" class="ui-grid-cell" ng-class="{'ui-grid-row-header-cell': col.isRowHeader, '__selected': row.entity===grid.appScope.selectedItem }" role="{{col.isRowHeader ? 'rowheader' : 'gridcell' }}" ui-grid-cell></div>
</script>
<script type="text/ng-template" id="am-time-ago.cell.html">
    <span class="table-date" am-time-ago="COL_FIELD"></span>
</script>